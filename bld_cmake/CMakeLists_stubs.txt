cmake_minimum_required (VERSION 3.17)

project (stubcomponents LANGUAGES Fortran)

include(GNUInstallDirs)
foreach(component glc wav ice esp ocn)
    add_library(${component} STATIC)
    target_compile_definitions(${component} PRIVATE LINUX CPRGNU NDEBUG NO_MPI2 PIO1 FORTRANUNDERSCORE NO_R16 CPRGNU HAVE_SLASHPROC)
    target_compile_options(${component} PRIVATE $<$<COMPILE_LANGUAGE:Fortran>:-ffree-form -ffree-line-length-none -mcmodel=medium -fconvert=big-endian>)
    if(${component} STREQUAL glc)
        target_sources(glc PUBLIC glc_comp_mct.F90)
        target_link_libraries(glc PRIVATE mct)
    elseif(${component} STREQUAL wav)
        target_sources(wav PUBLIC wav_comp_mct.F90)
        target_link_libraries(wav PRIVATE mct)
    elseif(${component} STREQUAL ice)
        target_sources(ice PUBLIC ice_comp_mct.F90)
        target_link_libraries(ice PRIVATE mct)
    elseif(${component} STREQUAL esp)
        target_sources(esp PUBLIC esp_comp_mct.F90)
        target_link_libraries(esp PRIVATE csm_share)
    elseif(${component} STREQUAL ocn)
        target_sources(ocn PUBLIC ocn_comp_mct.F90)
        target_link_libraries(ocn PRIVATE mct)
    endif()
    # install (TARGETS ${component}
    # EXPORT "${component}Targets"
    # ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
    # PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}
    # )
endforeach(component)